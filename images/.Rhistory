geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
scale_color_manual(name = "Effect Type", values = cols) +
scale_x_continuous(labels = NULL) +
geom_text(aes(x = estimate, y =admin_num+.1,
label = c("ATT","Bush", "Obama"))) +
coord_flip()
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
scale_color_manual(name = "Effect Type", values = cols) +
scale_x_continuous(labels = NULL) +
geom_text(aes(x = estimate, y =admin_num+.1,
label = c("ATT","Bush", "Obama")))
res$admin_num <- c(1,3,2)
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
scale_color_manual(name = "Effect Type", values = cols) +
scale_x_continuous(labels = NULL) +
geom_text(aes(x = estimate, y =admin_num+.1,
label = c("ATT","Bush", "Obama")))
res$admin_num <- c(2,1,3)
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
scale_color_manual(name = "Effect Type", values = cols) +
scale_x_continuous(labels = NULL) +
geom_text(aes(x = estimate, y =admin_num+.1,
label = c("ATT","Bush", "Obama")))
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
scale_color_manual(name = "Effect Type", values = cols) +
scale_y_continuous(labels = NULL) +
geom_text(aes(x = estimate, y =admin_num+.1,
label = c("ATT","Bush", "Obama")))
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
scale_color_manual(name = "Effect Type", values = cols) +
scale_y_continuous(labels = NULL, limits = c(0,4)) +
geom_text(aes(x = estimate, y =admin_num+.1,
label = c("ATT","Bush", "Obama")))
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
scale_color_manual(name = "Effect Type", values = cols) +
scale_y_continuous(labels = NULL, limits = c(0,3.5)) +
geom_text(aes(x = estimate, y =admin_num+.1,
label = c("ATT","Bush", "Obama")))
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
scale_color_manual(name = "Effect Type", values = cols) +
scale_y_continuous(labels = NULL, limits = c(0.5,3.5)) +
geom_text(aes(x = estimate, y =admin_num+.1,
label = c("ATT","Bush", "Obama")))
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
scale_color_manual(name = "Effect Type", values = cols) +
scale_y_continuous(labels = NULL, limits = c(0.5,3.5)) +
geom_text(aes(x = estimate, y =admin_num+.1,
label = c("ATT","Bush", "Obama"))) +
labs(x = "Coefficient on Connection",
y = NULL)
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
scale_color_manual(name = "Effect Type", values = cols) +
scale_y_continuous(breaks = NULL,labels = NULL, limits = c(0.5,3.5)) +
geom_text(aes(x = estimate, y =admin_num+.1,
label = c("ATT","Bush", "Obama"))) +
labs(x = "Coefficient on Connection",
y = NULL)
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
scale_color_manual(name = "Effect Type", values = cols) +
scale_y_continuous(labels = NULL, limits = c(0.5,3.5)) +
geom_text(aes(x = estimate, y =admin_num+.1,
label = c("ATT","Bush", "Obama"))) +
labs(x = "Coefficient on Connection",
y = NULL)
cols <- c("ATT" = "black",
"Admin. Specific" = "grey")
res$effect <- c("ATT", "Admin. Specific", "Admin. Specific")
res$admin_num <- c(2,1,3)
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
scale_color_manual(name = "Effect Type", values = cols) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
scale_y_continuous(labels = NULL, limits = c(0.5,3.5)) +
geom_text(aes(x = estimate, y =admin_num+.1,
label = c("ATT","Bush", "Obama"))) +
labs(x = "Coefficient on Connection",
y = NULL)
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
scale_color_manual(name = "Effect Type", values = cols) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
theme(legend.position="bottom") +
scale_y_continuous(labels = NULL, limits = c(0.5,3.5)) +
geom_text(aes(x = estimate, y =admin_num+.1,
label = c("ATT","Bush", "Obama"))) +
labs(x = "Coefficient on Connection",
y = NULL)
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
scale_color_manual(name = "Effect Type", values = cols) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
theme(legend.position="bottom") +
scale_y_continuous(labels = NULL, limits = c(0.5,3.5)) +
geom_text(aes(x = estimate, y =admin_num+.12,
label = c("ATT","Bush", "Obama"))) +
labs(x = "Coefficient on Connection",
y = NULL)
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
scale_color_manual(name = "Effect Type", values = cols) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
theme(legend.position="bottom") +
scale_y_continuous(labels = NULL, limits = c(0.25,3.75)) +
geom_text(aes(x = estimate, y =admin_num+.12,
label = c("ATT","Bush", "Obama"))) +
labs(x = "Coefficient on Connection",
y = NULL)
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
scale_color_manual(name = "Effect Type", values = cols) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
theme(legend.position="none") +
scale_y_continuous(labels = NULL, limits = c(0.25,3.75)) +
geom_text(aes(x = estimate, y =admin_num+.12,
label = c("ATT","Bush", "Obama"))) +
labs(x = "Coefficient on Connection",
y = NULL)
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
scale_color_manual(name = "Effect Type", values = cols) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
theme(legend.position="none") +
scale_y_continuous(labels = NULL, limits = c(0.25,3.75)) +
geom_text(aes(x = estimate, y =admin_num+.12,
label = c("ATT","Effect under Bush", "Effect under Obama"))) +
labs(x = "Coefficient on Connection",
y = NULL)
View(only_treat)
View(only_treat)
View(df)
df <- subset(df, lobby_firm != client_name)
yearly_panel <- df %>%
group_by(lobby_firm, year) %>%
summarise(revenue = sum(expenditure, na.rm=T),
lobbyist_name = lobbyist_name[1],
lobby_id = lobby_id[1],
treated = treated[1],
last_lobby_yr = last_lobby_yr[1],
agencies = agencies[1])
yearly_panel$revenue <- log(yearly_panel$revenue+.5)
pan.dat <- pdata.frame(yearly_panel, index = c("lobby_firm", "year"))
pan.dat$lead_rev <- plm::lag(pan.dat$revenue, -1)
pan.dat$lag_rev <- plm::lag(pan.dat$revenue, 1)
pan.dat$lag_rev2 <- plm::lag(pan.dat$revenue, 2)
pan.dat$fd_rev <- pan.dat$revenue - pan.dat$lag_rev
pan.dat$year_num <- as.numeric(as.character(pan.dat$year))
pan.dat$treatment <- ifelse(pan.dat$year_num <= pan.dat$last_lobby_yr, 0,
pan.dat$treated)
pan.dat$treatment <- ifelse(pan.dat$year_num > pan.dat$last_lobby_yr+2, 0,
pan.dat$treatment)
pan.dat$treatment <- ifelse(is.na(pan.dat$treatment)==T, 0, pan.dat$treatment)
pan.dat$lag_treat <- plm::lag(pan.dat$treatment, 1)
pan.dat$fd_treat <- pan.dat$treatment - pan.dat$lag_treat
pan.dat$admin <- ifelse(pan.dat$year_num > 2008, "Obama",
ifelse(pan.dat$year_num < 2009 & pan.dat$year_num > 2000, "Bush",
ifelse(pan.dat$year_num < 2001, "Clinton", NA)))
#table(pan.dat$admin, pan.dat$year_num)
pan.dat$bush <- ifelse(pan.dat$admin == "Bush", 1, 0)
pan.dat$obama <- ifelse(pan.dat$admin == "Obama", 1, 0)
pan.dat$clinton <- ifelse(pan.dat$admin == "Clinton", 1, 0)
only_treat <- subset(pan.dat, treated == 1)
#obama_treat <- subset(only_treat, year_num > 2008)
only_treat <- subset(only_treat, year_num > 2000)
all_fd <- plm(revenue ~ treatment
+ factor(year), data = only_treat,
model = "fd")
coeftest(all_fd, vcovHC(all_fd, type = "HC1"))
res <- tidy(all_fd)[2,2]
res <- data.frame(admin = as.character("ATT"), estimate = res,
se = sqrt(diag(vcovHC(all_fd, cluster = "group",
type = "HC1")))[2])
rownames(res) <-NULL
marginsplotdf<-function(model, xterm, zterm, zseq){
coefs<-coef(model)
cov<-vcovHC(model, cluster = "group", type = "HC1")
intterm<-ifelse(is.na(coefs[paste(xterm,zterm,sep=":")]),paste(zterm,xterm,sep=":"),paste(xterm,zterm,sep=":"))
dy.dx<-coefs[xterm]+coefs[intterm]*zseq
se.dy.dx<-sqrt(cov[xterm,xterm]+zseq^2*cov[intterm,intterm]+zseq*2*cov[xterm,intterm])
margins<-data.frame(admin=zseq,estimate=dy.dx,se=se.dy.dx)
return(margins)
}
fd_inter <- plm(revenue ~ treatment*obama
+ factor(year), data = only_treat,
model = "fd")
coeftest(fd_inter, vcovHC(fd_inter, cluter = "group", type = "HC1"))
admin_fx <- marginsplotdf(model = fd_inter,
xterm = "treatment", zterm = "obama",
zseq = 0:1)
rownames(admin_fx)<-NULL
res <- rbind(res, admin_fx)
res$admin<-as.character(res$admin)
res[2:3,1] <- c("Bush", "Obama")
res$effect <- c("ATT", "Admin. Specific", "Admin. Specific")
cols <- c("ATT" = "black",
"Admin. Specific" = "grey")
res$admin <- factor(res$admin,
levels = c("Bush", "ATT","Obama"))
res$admin_num <- c(2,1,3)
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
scale_color_manual(name = "Effect Type", values = cols) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
theme(legend.position="none") +
scale_y_continuous(labels = NULL, limits = c(0.25,3.75)) +
geom_text(aes(x = estimate, y =admin_num+.12,
label = c("ATT","Effect under Bush", "Effect under Obama"))) +
labs(x = "Coefficient on Connection",
y = NULL)
all_fe <- plm(revenue ~ treatment
+ factor(year), data = only_treat,
model = "within")
coeftest(all_fe, vcovHC(all_fe, cluster = "group", type = "HC1"))
fd_inter <- plm(revenue ~ treatment*obama
+ factor(year), data = only_treat,
model = "fd")
coeftest(fd_inter, vcovHC(fd_inter, cluter = "group", type = "HC1"))
admin_fx <- marginsplotdf(model = fd_inter,
xterm = "treatment", zterm = "obama",
zseq = 0:1)
rownames(admin_fx)<-NULL
res <- rbind(res, admin_fx)
res$admin<-as.character(res$admin)
res[2:3,1] <- c("Bush", "Obama")
res$effect <- c("ATT", "Admin. Specific", "Admin. Specific")
cols <- c("ATT" = "black",
"Admin. Specific" = "grey")
res$admin <- factor(res$admin,
levels = c("Bush", "ATT","Obama"))
res$admin_num <- c(2,1,3)
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
scale_color_manual(name = "Effect Type", values = cols) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
theme(legend.position="none") +
scale_y_continuous(labels = NULL, limits = c(0.25,3.75)) +
geom_text(aes(x = estimate, y =admin_num+.12,
label = c("ATT","Effect under Bush", "Effect under Obama"))) +
labs(x = "Coefficient on Connection",
y = NULL)
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
scale_color_manual(name = "Effect Type", values = cols) +
geom_point()
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
scale_color_manual(name = "Effect Type", values = cols) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3)
View(res)
ggplot(res, aes(x = estimate, y = admin_num, colour = effect)) +
scale_color_manual(name = "Effect Type", values = cols) +
geom_point() +
geom_errorbarh(aes(xmin = estimate-(1.96*se),
xmax = estimate+(1.96*se)), height = 0, size = .25)+
geom_errorbarh(aes(xmin = estimate-(1.64*se),
xmax = estimate+(1.64*se)), height = 0, size = .75) +
geom_vline(xintercept = 0, lty = 3) +
theme_classic() +
theme(legend.position="none") +
scale_y_continuous(labels = NULL, limits = c(0.25,3.75)) +
geom_text(aes(x = estimate, y =admin_num+.12,
label = c("ATT","Effect under Bush", "Effect under Obama"))) +
labs(x = "Coefficient on Connection",
y = NULL)
library(sp);library(spdep)
all_fe <- plm(revenue ~ treatment
+ factor(year), data = only_treat,
model = "within")
coeftest(all_fe, vcovHC(all_fe, cluster = "group", type = "HC1"))
library(haven); library(R2jags); library(MCMCpack); library(reshape); library(reshape2)
library(plyr); library(dplyr); library(ggplot2); library(runjags)
library(lme4); library(arm); library(broom); library(gridExtra)
library(stargazer);  library(lfe); library(plm); library(AER)
library(simcf); library(readr)
df <- read_csv("~/GitHub/Danish_muni/data/CityPolicy_20092018.csv",
col_types = cols(bluevote = col_number(),
fd_bluevote = col_number()))
df$socdem_reduced <- df$socdem_reduced*-1
df$fd_socdem_reduced <- df$lead_socdem_reduced - df$socdem_reduced
pan.dat <- pdata.frame(df, index = c("muni", "year")) # reformat data as panel
# full measure
pool.mod <- plm(lag_socdem1 ~ bluevote+ log_pop, data = pan.dat ,
model = "pooling")
coeftest(pool.mod, vcovHC(pool.mod, type = "HC1", cluster = "group"))
# reduced measure
pool.mod.red <- plm(lead_socdem_reduced ~ bluevote+ log_pop, data = pan.dat,
model = "pooling")
coeftest(pool.mod.red, vcovHC(pool.mod.red, type = "HC1", cluster = "group"))
fe.mod <- plm(lag_socdem1 ~ bluevote + log_pop + factor(year), data = pan.dat ,
model = "within", effects = "individual")
coeftest(fe.mod, vcovHC(fe.mod, cluster="group", type = "HC1"))
fd.mod <- plm(fd_socdem ~ fd_bluevote +  fd_pop + factor(year),
data = pan.dat, model = "pooling")
coeftest(fd.mod, vcovBK(fd.mod, type = "HC1"))
fd.mod.red <- plm(fd_socdem_reduced ~ fd_bluevote + fd_pop + factor(year),
data = pan.dat, model = "pooling",
effects = "time")
coeftest(fd.mod.red, vcovBK(fd.mod.red, type = "HC1"))
coeftest(fd.mod, vcovHC(fd.mod, type = "HC1"))
coeftest(fd.mod, vcovBK(fd.mod, type = "HC1"))
library(readr)
df <- read_csv("~/GitHub/Danish_muni/data/CityPolicy_25092018.csv")
View(df)
pan.dat <- pdata.frame(df, index = c("muni", "year")) # reformat data as panel
pool.mod <- plm(lag_socdem1 ~ bluevote+ log_pop, data = pan.dat ,
model = "pooling")
coeftest(pool.mod, vcovHC(pool.mod, type = "HC1", cluster = "group"))
pool.mod.red <- plm(lead_socdem_reduced ~ bluevote+ log_pop, data = pan.dat,
model = "pooling")
coeftest(pool.mod.red, vcovHC(pool.mod.red, type = "HC1", cluster = "group"))
fe.mod <- plm(lag_socdem1 ~ bluevote + log_pop + factor(year), data = pan.dat ,
model = "within", effects = "individual")
coeftest(fe.mod, vcovHC(fe.mod, cluster="group", type = "HC1"))
fd.mod <- plm(fd_socdem ~ fd_bluevote +  fd_pop + factor(year),
data = pan.dat, model = "pooling")
coeftest(fd.mod, vcovBK(fd.mod, type = "HC1"))
fd.mod.red <- plm(fd_socdem_reduced ~ fd_bluevote + fd_pop + factor(year),
data = pan.dat, model = "pooling",
effects = "time")
coeftest(fd.mod.red, vcovBK(fd.mod.red, type = "HC1"))
res <- data.frame(rbind(coef(pool.mod)[2], coef(fe.mod)[1],coef(lfe_mod)[1], coef(fd.mod)[2],
coef(pool.mod.red)[2], coef(fe.mod.red)[1], coef(lfe_mod_red)[1], coef(fd.mod.red)[2]),
rbind(sqrt(diag(vcovHC(pool.mod, type = "HC1")))[2],
sqrt(diag(vcovHC(fe.mod, type = "HC1")))[1],
sqrt(diag(vcov(lfe_mod)))[1],
sqrt(diag(vcovBK(fd.mod, type = "HC1")))[2],
sqrt(diag(vcovHC(pool.mod.red, type = "HC1")))[2],
sqrt(diag(vcovHC(fe.mod.red, type = "HC1")))[1],
sqrt(diag(vcov(lfe_mod_red)))[1],
sqrt(diag(vcovBK(fd.mod.red, type = "HC1")))[2]),
spec=c("Pooled", "Twoway\nFixed Effects", "Fixed Effects\nVarying Trends",
"First-Difference"),
#cont=c(rep("Simple Model",6), rep("+ Controls", 6)),
measure=c(rep("Full Measure",4), rep("Reduced Measure", 4)))
# allow time-trends/shocks to vary by population size and region (amt)
lfe_mod <- felm(lag_socdem1 ~ bluevote
| factor(muni) + factor(year):log_pop + factor(year) + factor(year):factor(region)|
0| muni,
data = pan.dat)
summary(lfe_mod)
#reduced measure
fe.mod.red <- plm(lead_socdem_reduced ~ bluevote+ log_pop + factor(year),
data = pan.dat ,
model = "within", effects = "individual")
coeftest(fe.mod.red, vcovHC(fe.mod.red, cluster = "group", type = "HC1"))
# varying trends
lfe_mod_red <- felm(lead_socdem_reduced ~ bluevote
| factor(muni) + factor(year):log_pop + factor(year) + factor(year):factor(region)|
0| muni,exactDOF=F,
data = pan.dat)
summary(lfe_mod_red)
res <- data.frame(rbind(coef(pool.mod)[2], coef(fe.mod)[1],coef(lfe_mod)[1], coef(fd.mod)[2],
coef(pool.mod.red)[2], coef(fe.mod.red)[1], coef(lfe_mod_red)[1], coef(fd.mod.red)[2]),
rbind(sqrt(diag(vcovHC(pool.mod, type = "HC1")))[2],
sqrt(diag(vcovHC(fe.mod, type = "HC1")))[1],
sqrt(diag(vcov(lfe_mod)))[1],
sqrt(diag(vcovBK(fd.mod, type = "HC1")))[2],
sqrt(diag(vcovHC(pool.mod.red, type = "HC1")))[2],
sqrt(diag(vcovHC(fe.mod.red, type = "HC1")))[1],
sqrt(diag(vcov(lfe_mod_red)))[1],
sqrt(diag(vcovBK(fd.mod.red, type = "HC1")))[2]),
spec=c("Pooled", "Twoway\nFixed Effects", "Fixed Effects\nVarying Trends",
"First-Difference"),
#cont=c(rep("Simple Model",6), rep("+ Controls", 6)),
measure=c(rep("Full Measure",4), rep("Reduced Measure", 4)))
names(res)[1:2] <- c("PE", "SE")
res$spec <- factor(res$spec, levels = c("First-Difference",
"Fixed Effects\nVarying Trends",
"Twoway\nFixed Effects",
"Pooled"))
c_plot<-ggplot(res, aes(x = PE, y = spec)) +
geom_point() +
geom_errorbarh(aes(xmin=PE-(1.96*SE),
xmax=PE+(1.96*SE)), height = 0, size = .25) +
geom_errorbarh(aes(xmin=PE-(1.64*SE),
xmax=PE+(1.64*SE)), height = 0, size = .75) +
facet_wrap(~measure, scales = "free_x") +
theme_classic() +
geom_vline(xintercept= 0, lty=2) +
#scale_y_continuous(limits = c(-.1,2.5))+
#coord_flip() +
labs(x=NULL,y="Coefficient on Electoral Support for\n Right-Wing Parties")
c_plot
setwd("C:/Users/ex-bce/Dropbox/Responsiveness/images")
ggsave(c_plot, filename = "CoefPlot_05102018.eps",
device = cairo_ps,
width = 7.34,
heigh = 4.56)
setwd("~/GitHub/Danish_muni/images")
ggsave(c_plot, filename = "CoefPlot_05102018.eps",
device = cairo_ps,
width = 7.34,
heigh = 4.56)
coeftest(fd.mod.red, vcovHC(fd.mod.red, type = "HC1"))
coeftest(fd.mod.red, vcovBK(fd.mod.red, type = "HC1"))
